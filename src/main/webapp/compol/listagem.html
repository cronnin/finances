<link rel="import" href="../polymer/components/polymer/polymer.html">
<link rel="import" href="../polymer/post-service/post-service.html">

<polymer-element name="listagem" attributes="columns">
    <template>
        <core-ajax id="ajax"
                   auto
                   url="../api/posts.json"
                   on-core-response="{{postsLoaded}}"
                   handleAs="json">
        </core-ajax>
        <style>
            .rotate {
                -webkit-transform: rotate(-90deg);
                -moz-transform: rotate(-90deg);
                -ms-transform: rotate(-90deg);
                -o-transform: rotate(-90deg);
                transform: rotate(-90deg);

                /* also accepts left, right, top, bottom coordinates; not required, but a good idea for styling */
                -webkit-transform-origin: 50% 50%;
                -moz-transform-origin: 50% 50%;
                -ms-transform-origin: 50% 50%;
                -o-transform-origin: 50% 50%;
                transform-origin: 50% 50%;
                /* Should be unset in IE9+ I think. */
                filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
            }
        </style>
        <div layout horizontal center>
            <table>
                <thead>
                    <tr>
                        <template repeat="{{column in columns}}">
                            <td>{{column.descricao}}</td>
                        </template>
                    </tr>
                </thead>
                <tbody>
                <template repeat="{{post in posts}}">
                    <tr>
                        <td>{{post}}</td>
                    </tr>
                </template>
                </tbody>
            </table>
        </div>
    </template>
    <script>
        Polymer('post-service', {
            created: function() {
                this.posts = [];
            },
            postsLoaded: function() {
                // Make a copy of the loaded data
                this.posts = this.$.ajax.response.slice(0);
            }
        });
    </script>
</polymer-element>
